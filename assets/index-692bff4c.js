import{C as M,G as w,M as v,A as b,l as V,V as f,a as re,T as Y,b as x,d as Fe,L as J,B as E,c as X,e as Be,f as ze,g as _e,R as De,F as Oe,h as ke,i as Re,j as S,S as T,k as N,m as Z,n as K,t as fe,o as G,N as U,P as B,p as Ne,D as z,q as le,r as ge,s as _,_ as ce,u as ee,v as te,w as je,x as Ee,y as Ue,z as ve,E as ye,H as $e,I as We,Q as qe,J as Ve,K as He,O as Je,U as Qe,W as Xe,X as Ye,Y as Ze}from"./szxs_logo-0ab5ca1e.js";import{L as Ke,R as et,F as tt,C as at,s as $,e as nt,a as it,b as st,c as ot,h as rt,g as lt,l as ct,d as ht,f as ut,i as pt,p as dt,j as mt,k as ft,m as gt,n as vt,o as yt,q as bt,r as wt,t as xt,u as St}from"./focus_move_bg-793f2183.js";import{o as O,c as k,a as P,F as he,r as ue,n as H,t as pe,b as be,d as we,e as Lt}from"./index-63eb6f16.js";import{B as xe,L as Se,E as Mt,G as Le,a as Gt,l as ie,P as Me,b as Ge,g as Pt,_ as Ct,c as Tt,h as It,r as At,d as Bt,f as Pe,e as _t,i as Ot,o as kt,s as Rt,m as Ft,j as zt,p as Dt}from"./flyLine2-932ac3c5.js";class Nt{constructor({material:e,time:t,size:n,diffuseColor:a,diffuseSpeed:i,diffuseHeight:s,diffuseStart:c}){this.time=t;let o={size:100,diffuseSpeed:15,diffuseColor:9345950,diffuseHeight:10,diffuseStart:1};this.options=Object.assign({},o,{material:e,size:n,diffuseColor:a,diffuseSpeed:i,diffuseHeight:s,diffuseStart:c}),this.init()}init(){let e=null,{material:t,size:n,diffuseColor:a,diffuseSpeed:i,diffuseHeight:s,diffuseStart:c}=this.options,o=n/i;t.onBeforeCompile=r=>{e=r,r.uniforms={...r.uniforms,uTime:{value:0},uSpeed:{value:i},uHeight:{value:s},uStart:{value:c},uColor:{value:new M(a)}},r.vertexShader=r.vertexShader.replace("void main() {",`
            varying vec3 vPosition;
            void main(){
              vPosition = position;
          `),r.fragmentShader=r.fragmentShader.replace("void main() {",`
            uniform float uTime;
            uniform vec3 uColor;
            uniform float uSpeed;
            uniform float uHeight;
            uniform float uStart;
            varying vec3 vPosition;
            void main(){
          `),r.fragmentShader=r.fragmentShader.replace("#include <opaque_fragment>",`
            #ifdef OPAQUE
            diffuseColor.a = 1.0;
            #endif
            #ifdef USE_TRANSMISSION
            diffuseColor.a *= material.transmissionAlpha;
            #endif
            float y0 = uStart + uTime * uSpeed * -1.0;
            float h = uHeight / 10.0;
            if(vPosition.y > y0 && vPosition.y < y0 + h*2.0){
              float per = 0.0;
              if(vPosition.y < y0 + h){
                  per = (vPosition.y - y0)*1.0 / h;
                  outgoingLight *= mix(outgoingLight,uColor,per);
                  diffuseColor.a =per;
                  diffuseColor.a =0.0;
              }else{
                  per = (vPosition.y - y0 - h)*1.0 / h;
                  outgoingLight *= mix(uColor,outgoingLight,per);
                  diffuseColor.a = 1.0-per;
              }
          }else{
          }
          gl_FragColor = vec4( outgoingLight, diffuseColor.a );
          `)},this.time.on("tick",r=>{e&&(e.uniforms.uTime.value+=r,e.uniforms.uTime.value>o&&(e.uniforms.uTime.value=0))})}}class Q{constructor({time:e},t){this.time=e,this.instance=new w,this.run=!0;let n={speed:.003,texture:null,radius:.1,segments:32,radialSegments:8,data:[],renderOrder:1,globeRadius:106.5,customRunCallback:null,material:new v({color:16777215,transparent:!0,fog:!1,depthTest:!1,depthWrite:!1,blending:b})};this.options=Object.assign({},n,t),this.init()}init(){const{material:e,texture:t,segments:n,radius:a,radialSegments:i,data:s,speed:c,renderOrder:o,globeRadius:r}=this.options;s.map(u=>{let l=[];u.geometry.coordinates.map(g=>{g[0].forEach(L=>{let{x:C,y:R,z:A}=V(...L,r);l.push(new f(C,R,A))})});const p=new re(l),m=new Y(p,n,a,i,!1),d=new x(m,e);d.position.set(0,0,0),d.renderOrder=o,this.instance.curve=p,this.instance.add(d)}),t.offset.x=.5,this.time.on("tick",(u,l)=>{this.run&&(this.options.customRunCallback?this.options.customRunCallback.call(this,u,l,t):t.offset.x+=c*u)})}getInstance(){return this.instance}setParent(e){e.add(this.instance)}set visible(e){this.instance.visible=e,this.run=e}}const jt=(h,e,t)=>{var n=e*Math.PI/180,a=t*Math.PI/180;n=-n;var i=h*Math.cos(a)*Math.cos(n),s=h*Math.sin(a),c=h*Math.cos(a)*Math.sin(n);return{x:i,y:s,z:c}},Ce=(h,e,t={})=>{let n={color:65535};n=Fe(n,t);const a=new J(n);let i=e.features,s=Et(i);const c=new E(new Float32Array(s),3),o=new X;o.attributes.position=c;let r=new Be(o,a);return r.scale.set(h,h,h),r.name="createCountryMergeSphereLine",r};function Et(h){let e=[];for(let t=0;t<h.length;t++)h[t].geometry.coordinates.forEach(a=>{const i=[];a[0].forEach(s=>{let{x:c,y:o,z:r}=jt(1,...s);i.push(parseFloat(c.toFixed(3)),parseFloat(o.toFixed(3)),parseFloat(r.toFixed(3)))}),e.push(i[0],i[1],i[2]);for(let s=3;s<i.length;s+=3)e.push(i[s],i[s+1],i[s+2],i[s],i[s+1],i[s+2]);e.push(i[0],i[1],i[2])});return e}function Te(h,e){return Math.sqrt((e.x-h.x)*(e.x-h.x)+(e.y-h.y)*(e.y-h.y)+(e.z-h.z)*(e.z-h.z))}const q=[{name:"广州",centroid:[113.544372,23.329249]},{name:"开罗",centroid:[31.2304,30.0372]},{name:"怀特霍斯",centroid:[-115.6722,60.3978]},{name:"珀斯",centroid:[115.8605,-31.9527]},{name:"内罗毕",centroid:[36.8752,-1.2922]},{name:"莫斯科",centroid:[37.5665,55.7571]},{name:"巴西利亚",centroid:[-47.8879,-15.7886]},{name:"华盛顿",centroid:[-77.0365,38.8976]},{name:"东京",centroid:[139.6917,35.6895]},{name:"马尼拉",centroid:[120.9911,15.1202]},{name:"苏瓦",centroid:[178.7253,-17.7838]},{name:"新德里",centroid:[77.1983,28.6354]},{name:"巴黎",centroid:[2.3506,48.8563]},{name:"阿布贾",centroid:[11.8605,32.4401]},{name:"内比都",centroid:[96.1203,19.8554]},{name:"曼谷",centroid:[100.5333,13.7596]},{name:"新加坡",centroid:[103.8167,1.2833]},{name:"德黑兰",centroid:[51.4281,35.6892]},{name:"乌兰巴托",centroid:[106.9173,47.9081]},{name:"斯里兰卡",centroid:[80.6528,6.9261]},{name:"塔那那利佛",centroid:[48.2278,18.3306]}],I=100,j=new f,se=new f,Ut=new f,Ie=new ze;let $t=class extends _e{constructor(e,t){super(e,{isOrthographic:!0}),this.GLOBE_RADIUS=I,this.raycaster=new De,this.assets=t.instance,this.scene.fog=new Oe(0,0,700),this.camera.instance.position.set(0,0,300),this.camera.instance.near=.01,this.camera.instance.far=1e4,this.camera.instance.lookAt(0,0,0),this.camera.instance.updateProjectionMatrix(),this.camera.controls.enableDamping=!1,this.renderer.instance.setClearColor(0,0),this.focusDataName=q[0].name,this.init(),this.initModel()}init(){this.globeScene=new w,this.scene.add(this.globeScene),this.rippleGroup=new w,this.globeScene.add(this.rippleGroup),this.flyLineGroup=new w,this.globeScene.add(this.flyLineGroup),this.label3d=new ke(this),this.labelGroup=new w,this.label3d.setRenderLevel(3),this.globeScene.add(this.labelGroup),this.dialog2d=new Ke(this),this.dialog2d.setRenderLevel(9),this.dialogGroup=new w,this.globeScene.add(this.dialogGroup),this.landLineGroup=new w,this.globeScene.add(this.landLineGroup),this.coastLineGroup=new w,this.globeScene.add(this.coastLineGroup),this.particleHaloGroup=new w,this.globeScene.add(this.particleHaloGroup),this.interactionManager=new Re(this.renderer.instance,this.camera.instance,this.canvas)}initModel(){this.createGlobe(),this.createGlobeGaoguang(),this.createGlobeLine(),this.createChinaWall(),this.createChinaGlowShadowBg(),this.createChinaGlowBg(),this.createAtmosphere(),this.createCloud(),this.createArcAll(),this.createRippleCirle(),this.createGrid(),this.createStorke(),this.createCoastLine(),this.createLandLine1(),this.createLandLine2(),this.createLabel(),this.createFocus();let e=this.createGlobeRing(I+150);this.createGPS(e.curve),this.createStar(),this.createStar2(),this.initAnimate()}initAnimate(){this.animateIn()}animateIn(){let e=S.timeline();e.to(this.globeScene.rotation,{duration:3,y:3*Math.PI,ease:"power1.inOut"}),e.to(this.globeScene.scale,{duration:2,x:.8,y:.8,z:.8,ease:"power1.inOut"},"-=2")}animateInOut(){return this.globeDom=document.querySelector(".globe"),this.globeDom.tlInOut=S.timeline(),this.globeDom.tlInOut.to(this.globeScene.rotation,{duration:2,y:9*Math.PI,ease:"power1.inOut"}).to(this.globeScene.scale,{duration:2,x:3,y:3,z:3,ease:"power1.inOut",onComplete:()=>{this.globeDom.style.display="none",this.config.hasUpdate=!1,this.star1Tween.pause(),this.star2Tween.pause(),this.globeScene.rotation.y=3*Math.PI}},"<").to(this.globeDom,{opacity:0},"-=1"),this.globeDom.tlInOut}animateOutIn(){this.globeDom.style.display="block",this.config.hasUpdate=!0,this.globeDom.tlOutIn=S.timeline(),this.globeDom.tlOutIn.to(this.globeDom,{opacity:1,duration:.5}).to(this.globeScene.scale,{duration:2,x:.8,y:.8,z:.8,ease:"power4.out"},"<").to(this.globeScene.rotation,{duration:2,y:9*Math.PI,ease:"power4.out",onComplete:()=>{this.globeScene.rotation.y=3*Math.PI,this.star1Tween.play(),this.star2Tween.play()}},"<")}createGlobe(){const e=this.assets.getResource("earthAtoms");e.colorSpace=T;let t=new N(this.GLOBE_RADIUS,60,60),n=new v({color:16777215,map:e,fog:!1}),a=new x(t,n);a.name="earth",this.earthMesh=a,this.globeScene.add(a),this.globeScene.rotation.y=Math.PI,this.globeScene.rotation.x=Math.PI/30,this.globeScene.scale.set(.3,.3,.3),this.globeScene.position.set(0,-5,0),this.setDayNight(n)}setDayNight(e){const t=this.assets.getResource("earthAtoms"),n=this.assets.getResource("earthNight");t.colorSpace=T,n.colorSpace=T,e.onBeforeCompile=a=>{this.shader=a,a.uniforms={...a.uniforms,uColor:{value:new M(16777215)},sunDirection:{value:new f(1,1,0)},dayTexture:{value:t},nightTexture:{value:n}},a.vertexShader=a.vertexShader.replace("void main() {",`
        varying vec2 vUv;
        varying vec3 vNormall;
        void main() {
          vUv = uv;
          vNormall = normalMatrix * normal;
              `),a.fragmentShader=a.fragmentShader.replace("void main() {",`
          uniform sampler2D dayTexture;
          uniform sampler2D nightTexture;
          uniform vec3 sunDirection;
          uniform vec3 uColor;
          varying vec2 vUv;
          varying vec3 vNormall;
          void main() {
        `),a.fragmentShader=a.fragmentShader.replace("#include <opaque_fragment>",`
              #ifdef OPAQUE
              diffuseColor.a = 1.0;
              #endif
              #ifdef USE_TRANSMISSION
              diffuseColor.a *= material.transmissionAlpha;
              #endif
              vec3 dayColor = texture2D(dayTexture, vUv).rgb;
              vec3 nightColor = texture2D(nightTexture, vUv).rgb;
              float cosineAngleSunToNormal = dot(normalize(vNormall), sunDirection);
              cosineAngleSunToNormal = clamp(cosineAngleSunToNormal * 1.0, -1.0, 1.0);
              float mixAmount = cosineAngleSunToNormal * 0.5 + 0.5;
              vec3 color = mix(nightColor, dayColor, mixAmount);
              color *= mix(outgoingLight, uColor, 1.2);
              gl_FragColor = vec4(color , diffuseColor.a );
              `)}}createAtmosphere(){const e=this.assets.getResource("globeHuiguang"),t=I,n=new Z({map:e,color:new M("#06FF31"),transparent:!0,fog:!1,depthWrite:!1}),a=new K(n);let i=t*3.53;a.scale.set(i,i,i),this.globeScene.add(a)}createGlobeGaoguang(){const e=this.assets.getResource("highLight");e.colorSpace=T;let t=new K(new Z({color:3763936,map:e,transparent:!0,fog:!1,alphaMap:e,depthTest:!1,blending:b}));t.position.set(0,0,0),t.scale.set(I*2.5,I*2.5,0),t.renderOrder=2,this.globeScene.add(t)}createGlobeLine(){const e=this.assets.getResource("earthAtomsLine"),t=new N(I*1.001,60,60),n=new v({color:16777215,fog:!1,alphaMap:e,transparent:!0,opacity:1}),a=new x(t,n);this.globeScene.add(a)}createCloud(){const n=this.assets.getResource("earthClouds"),a=new N(I*1.004,60,60),i=new v({color:16777215,map:n,fog:!1,transparent:!0,opacity:.5,depthTest:!1}),s=new x(a,i);this.globeScene.add(s),this.time.on("tick",()=>{s.rotation.y+=-.04*Math.PI/180})}createChinaWall(){let e=new w,t=this.assets.getResource("chinaStorke"),n=fe(t);for(let s=0;s<40;s++){let c=Ce(100+s*.1,n,{color:90165,transparent:!0,opacity:1});e.add(c)}let a=this.assets.getResource("china");a=fe(a);let i=Ce(104.2,a,{color:3342243,transparent:!0,opacity:.5,depthWrite:!1,blending:b});i.renderOrder=100,e.add(i),this.globeScene.add(e)}createChinaGlowBg(){let e=this.assets.getResource("chinaGlow");e.colorSpace=T;let t=new N(I+4.25,60,60),n=new v({map:e,transparent:!0,fog:!1,opacity:1,depthWrite:!1}),a=new x(t,n);a.renderOrder=98,this.globeScene.add(a)}createChinaGlowShadowBg(){let e=this.assets.getResource("chinaGlowShadow");e.colorSpace=T;let t=new N(I+.25,60,60),n=new v({map:e,transparent:!0,fog:!1,opacity:1}),a=new x(t,n);this.globeScene.add(a)}createLabel(){q.map(e=>{let t=`<div class="globe-label-content">${e.name}</div>`,n=this.label3d.create(t,"globe-label",!0),{x:a,y:i,z:s}=V(...e.centroid,101);n.init(t,new f(a-10,i,s)),this.label3d.setLabelStyle(n,.22),n.setParent(this.labelGroup)})}createStorke(){const e=this.assets.getResource("pathLine").clone();e.wrapS=e.wrapT=G,e.repeat.set(2,.25);let t=this.assets.getResource("chinaStorke");t=JSON.parse(t);let n=t.features.map(i=>({geometry:i.geometry})),a=new Q(this,{data:n,texture:e,renderOrder:99,speed:.15,radius:.2,segments:256*10,radialSegments:4,globeRadius:104.55,material:new v({color:16777215,map:e,fog:!1,transparent:!0,opacity:1,depthWrite:!1,blending:b})});a.run=!0,a.setParent(this.globeScene),this.storkePath=a}createCoastLine(){const e=this.assets.getResource("pathLine3").clone();e.wrapS=e.wrapT=G,e.colorSpace=T,e.repeat.set(70,1),e.generateMipmaps=!1,e.magFilter=U;let t=this.assets.getResource("haianxian");t=JSON.parse(t);let n=t.features.map(i=>({geometry:i.geometry})),a=new Q(this,{data:n,texture:e,renderOrder:99,speed:-.6,radius:.2,segments:256*10,radialSegments:4,globeRadius:100.55,material:new v({color:16777215,map:e,fog:!1,transparent:!0,opacity:1,depthWrite:!1,blending:b})});a.run=!0,a.setParent(this.coastLineGroup),this.createMoveIcon(this.coastLineGroup,a.instance.curve)}createLandLine1(){const e=this.assets.getResource("pathLine2").clone();e.wrapS=e.wrapT=G,e.colorSpace=T,e.repeat.set(30,1),e.generateMipmaps=!1,e.magFilter=U;let t=this.assets.getResource("ludixian1");t=JSON.parse(t);let n=t.features.map(i=>({geometry:i.geometry})),a=new Q(this,{data:n,texture:e,renderOrder:99,speed:-.6,radius:.2,segments:256*10,radialSegments:4,globeRadius:100.55,material:new v({color:16777215,map:e,fog:!1,transparent:!0,opacity:1,depthWrite:!1,blending:b})});a.run=!0,a.setParent(this.landLineGroup),this.createMoveIcon(this.landLineGroup,a.instance.curve,"luyunIcon","yellow",3e-4)}createLandLine2(){const e=this.assets.getResource("pathLine2").clone();e.wrapS=e.wrapT=G,e.colorSpace=T,e.repeat.set(30,1),e.generateMipmaps=!1,e.magFilter=U;let t=this.assets.getResource("ludixian2");t=JSON.parse(t);let n=t.features.map(i=>({geometry:i.geometry})),a=new Q(this,{data:n,texture:e,renderOrder:99,speed:-.6,radius:.2,segments:256*10,radialSegments:4,globeRadius:100.55,material:new v({color:16777215,map:e,fog:!1,transparent:!0,opacity:1,depthWrite:!1,blending:b})});a.run=!0,a.setParent(this.landLineGroup),this.createMoveIcon(this.landLineGroup,a.instance.curve,"luyunIcon",3342243,.001)}createMoveIcon(e,t,n="haiyunIcon",a=3342243,i=1e-4){const s=this.assets.getResource(n).clone();s.wrapS=s.wrapT=G,s.colorSpace=T,s.rotation=-Math.PI/2;const c=new B(1,1),o=new v({color:new M(a),map:s,transparent:!0,opacity:1,depthWrite:!1,depthTest:!1}),r=new x(c,o);r.renderOrder=130,e.add(r),this.addIconEvent(r),r.scale.set(10,10,10);var u=0;this.time.on("tick",()=>{var l=t.getPointAt(u);r.position.copy(l);var p=new f(l.x,l.y,l.z).normalize(),m=new f(0,0,1);r.quaternion.setFromUnitVectors(m,p),r.rotation.z=-Math.PI/2,u+=i,u>.9999&&(u=0)})}addIconEvent(e){this.interactionManager.add(e),e.addEventListener("click",t=>{this.createDialog(t.target)}),e.addEventListener("mouseover",t=>{document.body.style.cursor="pointer"}),e.addEventListener("mouseout",t=>{document.body.style.cursor="default"})}createDialog(e){let t=`
        <div class="globe-dialog">
          <div class="globe-dialog-title">
            <span class="zh">标题内容</span>
            <span class="en">TITLE CONTENT</span>
          </div>
          <div class="globe-dialog-content">
            <div class="online">
              <div class="online-icon"></div>
              <div class="online-content">
                <span class="zh">在线</span>
                <span class="en">ONLINE</span>
              </div>
            </div>
            <div class="event">
              <div class="event-item">
                <div class="label">事件名称</div>
                <div class="value">标题名称内容详情</div>
              </div>
              <div class="event-item">
                <div class="label">发生时间</div>
                <div class="value">2024.02.18</div>
              </div>
              <div class="event-item">
                <div class="label">处理进度</div>
                <div class="value">32%</div>
              </div>
            </div>
          </div>
          <div class="globe-dialog-close">关闭</div>
        </div>
      `,n=this.dialog2d.create(t,"globe-dialog-wrap",!0);n.init(t,e.position),n.setParent(this.dialogGroup),n.element.querySelector(".globe-dialog-close").addEventListener("click",()=>{n.remove()})}createArcAll(){let e=[...q],t=e[0];e.splice(0,1);let n=101,a=25,i=[],s=new w;s.name="arcAll";const c=(y=[],D=n)=>{let ne=V(...y,D);return new f(ne.x,ne.y,ne.z)};for(let y=0;y<e.length;y++){var o=c([t.centroid[0],t.centroid[1]],104.26),r=c([e[y].centroid[0],e[y].centroid[1]]),u=1+.005*Te(o,r),l=new f;l.addVectors(o,r),l.normalize().multiplyScalar(n*u);var p=1+.005*Te(o,l),m=new f;m.addVectors(o,l),m.normalize().multiplyScalar(n*p);var d=new f;d.addVectors(l,r),d.normalize().multiplyScalar(n*p);var g=new Ne(o,m,d,r),L=g.getPoints(a);for(let D=0;D<a;D++)i.push(L[D]),i.push(L[D+1])}let C=new X,R=new J({linewidth:1,color:new M("#ffffff"),blending:b,opacity:1,transparent:!0});var A=new Float32Array(3*i.length),de=new Float32Array(i.length);for(let y=0;y<i.length;y++)A[3*y]=i[y].x,A[3*y+1]=i[y].y,A[3*y+2]=i[y].z,de[y]=1;C.setAttribute("position",new E(A,3));let ae=new Be(C,R);s.add(ae),s.visible=!1,this.flyLineGroup.add(s);let me=new J({color:16777215,blending:b,opacity:.5,transparent:!0});me.onBeforeCompile=y=>{y.uniforms={...y.uniforms,color:{value:new M("#ffffff")}},y.vertexShader=y.vertexShader.replace("void main() {",`
          attribute float alpha;
              varying float vAlpha;
          void main() {
            vAlpha = alpha;
                `),y.fragmentShader=y.fragmentShader.replace("void main() {",`
            uniform vec3 color;
            varying float vAlpha;
            void main() {
          `),y.fragmentShader=y.fragmentShader.replace("#include <opaque_fragment>",`
                #ifdef OPAQUE
                diffuseColor.a = 1.0;
                #endif
                #ifdef USE_TRANSMISSION
                diffuseColor.a *= material.transmissionAlpha;
                #endif
                gl_FragColor = vec4( outgoingLight, diffuseColor.a );
                gl_FragColor = vec4(  color, diffuseColor.a * vAlpha );
                                `)};let W=new w;W.name="Rocket";let F=ae.clone();F.geometry=ae.geometry.clone(),F.geometry.setAttribute("position",new E(A,3)),F.geometry.setAttribute("alpha",new E(de,1)),F.material=me,F.renderOrder=100,W.add(F),W.visible=!0,this.arcRocketObject=W,this.flyLineGroup.add(W),this.createFlyLine(e,F,a)}createFlyLine(e,t,n){let a=[],i=t.geometry.attributes.position.array,s=n*2,c=[];for(let u=0;u<i.length;u+=3){let l=i[u],p=i[u+1],m=i[u+2];c.push(new f(l,p,m))}e.map((u,l)=>{let p=c.slice(l*s,s*(l+1));a.push(p)});const o=this.assets.getResource("pathLine").clone();o.wrapS=o.wrapT=G,o.repeat.set(1,1),o.magFilter=U,o.minFilter=U;const r=new v({color:new M("#f60"),map:o,alphaMap:o,transparent:!0,depthWrite:!1,opacity:0,blending:b});this.flyLineMaterial=r,this.flyLineArr=[],a.map(u=>{let l=u,p=new re(l),m={segments:64,radius:.3,radialSegments:8};const d=new Y(p,m.segments,m.radius,m.radialSegments,!1),g=new x(d,r);g.renderOrder=110,this.flyLineArr.push(g),this.flyLineGroup.add(g)}),S.to(this.flyLineMaterial,{opacity:1,ease:"power1.inOut"}),this.time.on("tick",(u,l)=>{r.opacity+=u,r.opacity>1&&(r.opacity=1),o.offset.x-=.4*u})}createGrid(){const e=this.assets.getResource("gridBlack"),t=this.assets.getResource("gridBlack");t.wrapS=t.wrapT=e.wrapS=e.wrapT=G,e.repeat.set(220/2,256/2),t.repeat.set(220/2,256/2);let n=new N(I+20.1,60,60),a=new v({color:7243677,map:e,alphaMap:t,transparent:!0,depthWrite:!1,depthTest:!1,opacity:0,blending:b});new Nt({material:a,time:this.time,size:520,diffuseSpeed:150,diffuseColor:16777215,diffuseHeight:820,diffuseStart:110});let i=new x(n,a);setTimeout(()=>{this.globeScene.add(i)},0)}createRippleCirle(){let e=this.rippleGroup;return q.map((n,a)=>({lat:n.centroid[0],lng:n.centroid[1],color:new M(6221735),name:n.name})).forEach((n,a)=>{if(n.name!=this.focusDataName){let c=I+.32,o=new et(this,{number:3,radius:Math.random()*3+1,frequency:Math.floor(Math.random()*3)+1,color:n.color});o.instance.userData=n,o.setParent(e),o.instance.traverse(p=>{p.name==="CircleLine"&&(p.renderOrder=110)});let r=V(n.lat,n.lng,c);o.setPosition(new f(r.x,r.y,r.z));var i=new f(r.x,r.y,r.z).normalize(),s=new f(0,0,1);o.instance.quaternion.setFromUnitVectors(s,i);let u=this.createPointLight(n,4),l=this.createLightPillar(4,n.color);o.instance.add(l),o.instance.add(u)}}),e}createPointLight(e,t){const n=this.assets.getResource("pointLight"),a=new B(t,t),i=new v({map:n,transparent:!0,depthWrite:!1,depthTest:!1,color:e.color,blending:b}),s=new x(a,i);return s.scale.set(.5,.5,.5),s.renderOrder=110,s}createLightPillar(e,t){const n=new w,a=this.assets.getResource("lightPillar");let i=41/200,s=e/i;const c=new B(e,s);c.rotateX(Math.PI/2),c.translate(0,0,s/2);const o=new v({map:a,transparent:!0,side:z,depthWrite:!1,blending:b,color:t}),r=new x(c,o);r.renderOrder=110;const u=r.clone();return u.rotation.z=Math.PI/2,n.add(r,u),n}createFocus(){q.map((e,t)=>{if(e.name===this.focusDataName){let i=new tt(this),{x:s,y:c,z:o}=V(...e.centroid,I+4.26);i.position.set(s,c,o),i.scale.set(15,15,15),this.rippleGroup.add(i),this.focusObj=i;var n=new f(s,c,o).normalize(),a=new f(0,0,1);i.quaternion.setFromUnitVectors(a,n)}})}createGlobeRing(e=100,t=-Math.PI/2){let n=this.assets.getResource("flyline");n.wrapT=n.wrapS=G,n.repeat.set(1,2);let a=new at(e,100),i=[],s=a.attributes.position.array;for(let p=0;p<s.length;p+=3){let m=s[p],d=s[p+1],g=s[p+2];i.push(new f(m,d,g))}const c=new v({color:new M("#449378"),map:n,side:z,transparent:!0,depthWrite:!1,opacity:.2});let o=new re(i),r={segments:100,radius:4,radialSegments:2};const u=new Y(o,r.segments,r.radius,r.radialSegments,!1),l=new x(u,c);return l.rotation.x=t,this.particleHaloGroup.add(l),l.curve=o,l}createGPS(e){let t=new w;t.rotation.x=-Math.PI/2;const a=this.assets.getResource("gps").scene.getObjectByName("gps").clone();a.rotation.z=-Math.PI/2,a.scale.set(.8,.8,.8),a.material=new v({color:6221735,wireframe:!0,transparent:!0,opacity:.5}),t.add(a),this.particleHaloGroup.add(t);var i=1;this.time.on("tick",()=>{var s=e.getPointAt(i);a.position.copy(s),i+=5e-4,i>1&&(i=0)})}createStar(){const e=Math.PI*2,t={count:200,size:3,radius:260,thickness:.1,color:"#bef9e5"};let n=new X,a=new Float32Array(t.count*3);const i=this.assets.getResource("dotBlur");for(let o=0;o<t.count;o++){let r=_.randFloat(.9,1)*t.radius,u=Math.pow(_.randFloat(-3,3),3)*r/200,l=Math.pow(_.randFloat(-3,3),3)*r/200,p=Math.pow(_.randFloat(-3,3),3)*r/200,m=o/t.count*e,d=Math.cos(m),g=Math.sin(m);a[o*3]=r*d+u,a[o*3+1]=t.thickness*g+l,a[o*3+2]=r*g+p}let s=new le({map:i,size:t.size,sizeAttenuation:!0,transparent:!0,depthWrite:!1,blending:b,color:new M(t.color)});n.setAttribute("position",new E(a,3));let c=new ge(n,s);this.star1Tween=S.to(c.rotation,{y:2*Math.PI,repeat:-1,duration:100,ease:"none"}),this.particleHaloGroup.add(c)}createStar2(){const e=Math.PI*2,t={count:300,size:1,radius:260,thickness:.1,color:"#449378"};let n=new X,a=new Float32Array(t.count*3);const i=this.assets.getResource("dotBlur");for(let o=0;o<t.count;o++){let r=_.randFloat(.8,1.2)*t.radius,u=Math.pow(_.randFloat(-3,3),3)*r/100,l=Math.pow(_.randFloat(-3,3),3)*r/100,p=Math.pow(_.randFloat(-3,3),3)*r/100,m=o/t.count*e,d=Math.cos(m),g=Math.sin(m);a[o*3]=r*d+u,a[o*3+1]=t.thickness*g+l,a[o*3+2]=r*g+p}let s=new le({map:i,size:t.size,sizeAttenuation:!0,transparent:!0,depthWrite:!1,blending:b,color:new M(t.color)});n.setAttribute("position",new E(a,3));let c=new ge(n,s);this.star2Tween=S.to(c.rotation,{y:2*Math.PI,repeat:-1,duration:300,ease:"none"}),this.particleHaloGroup.add(c)}update(){super.update(),this.interactionManager&&this.interactionManager.update(),this.labelGroup&&this.labelGroup.children.length&&this.updateLabel()}updateLabel(){let e=this.camera.instance;Ie.getNormalMatrix(e.matrixWorldInverse),e.getWorldPosition(Ut),this.labelGroup.children.map(t=>{let n=t.position.clone();if(j.copy(n),j.applyMatrix4(this.globeScene.matrixWorld),j.applyMatrix3(Ie),se.copy(n),se.applyMatrix4(e.matrixWorldInverse).normalize(),j.dot(se)>-.22){t.scaleHide();return}t.show(),j.copy(n),j.project(e)})}destroy(){super.destroy(),this.interactionManager&&this.interactionManager.dispose(),this.chinaMap&&this.chinaMap.destroy()}};const Wt={data(){return this.canvasGlobe=null,this.initBtnList=[{name:"柱状图",checked:!0},{name:"飞线",checked:!0},{name:"标签",checked:!0},{name:"陆运线",checked:!0},{name:"海航线",checked:!0},{name:"粒子光环",checked:!0}],{btnList:ee(this.initBtnList)}},mounted(){te.$on("loadGlobe",this.loadGlobe)},beforeUnmount(){this.canvasGlobe&&this.canvasGlobe.destroy()},methods:{async loadGlobe(h){this.canvasGlobe=new $t(document.getElementById("canvasGlobe"),h),await $(3e3),this.showBtn()},async animateInOut(){this.canvasGlobe&&this.canvasGlobe.animateInOut(),this.hideBtn()},animateOutIn(){this.canvasGlobe&&this.canvasGlobe.animateOutIn(),this.showBtn()},showBtn(){S.to(".globe-btn-group .btn",{x:0,stagger:.1})},async hideBtn(){S.to(".globe-btn-group .btn",{x:"-150%",stagger:.1}),await $(3e3),this.btnList=ee(this.initBtnList),this.initBtnList.map(h=>{this.changeGroupVisible(h.name,h.checked)})},changeBtnChecked(h,e){let t=!this.btnList[e].checked;this.btnList[e].checked=t,this.changeGroupVisible(h,t)},changeGroupVisible(h,e){let t={柱状图:"rippleGroup",飞线:"flyLineGroup",标签:"labelGroup",陆运线:"landLineGroup",海航线:"coastLineGroup",粒子光环:"particleHaloGroup"};this.canvasGlobe&&(h==="标签"&&this.canvasGlobe[t[h]].children.map(n=>{n.visible=e}),this.canvasGlobe[t[h]].visible=e)}}},qt={class:"globe"},Vt=P("canvas",{id:"canvasGlobe"},null,-1),Ht={class:"btn-group globe-btn-group"},Jt=["onClick"];function Qt(h,e,t,n,a,i){return O(),k("div",qt,[Vt,P("div",Ht,[(O(!0),k(he,null,ue(a.btnList,(s,c)=>(O(),k("div",{class:H(["btn",{active:s.checked}]),key:c,onClick:o=>i.changeBtnChecked(s.name,c)},pe(s.name),11,Jt))),128))])])}const Xt=ce(Wt,[["render",Qt]]),Yt=[{name:"北京市",center:[116.405285,39.904989],centroid:[116.41995,40.18994],hide:!0},{name:"天津市",center:[117.190182,39.125596],centroid:[117.347043,39.288036],hide:!0},{name:"河北省",center:[114.502461,38.045474],centroid:[114.502461,38.045474],hide:!0},{name:"山西省",center:[112.549248,37.857014],centroid:[112.304436,37.618179],hide:!0},{name:"内蒙古自治区",center:[111.670801,40.818311],centroid:[114.077429,44.331087],hide:!0},{name:"辽宁省",center:[123.429096,41.796767],centroid:[122.604994,41.299712],hide:!0},{name:"吉林省",center:[125.3245,43.886841],centroid:[126.171208,43.703954],hide:!0},{name:"黑龙江省",center:[126.642464,45.756967],centroid:[127.693027,48.040465],hide:!0},{name:"上海市",center:[121.472644,31.231706],centroid:[121.438737,31.072559],hide:!0},{name:"江苏省",center:[118.767413,32.041544],centroid:[119.486506,32.983991],hide:!0},{name:"浙江省",center:[120.153576,30.287459],centroid:[120.109913,29.181466],hide:!0},{name:"安徽省",center:[117.283042,31.86119],centroid:[117.226884,31.849254],hide:!0},{name:"福建省",center:[119.306239,26.075302],centroid:[118.006468,26.069925],blur:!0},{name:"江西省",center:[115.892151,28.676493],centroid:[115.732975,27.636112],blur:!0},{name:"山东省",center:[117.000923,36.675807],centroid:[118.187759,36.376092],hide:!0},{name:"河南省",center:[113.665412,34.757975],centroid:[113.619717,33.902648],hide:!0},{name:"湖北省",center:[114.298572,30.584355],centroid:[112.271301,30.987527],hide:!0},{name:"湖南省",center:[112.982279,28.19409],centroid:[111.711649,27.629216],blur:!0},{name:"广东省",center:[113.280637,23.125178],centroid:[113.429919,23.334643],hide:!0},{name:"广西壮族自治区",center:[108.320004,22.82402],centroid:[108.7944,23.833381]},{name:"海南省",center:[110.33119,20.031971],centroid:[109.754859,19.189767],hide:!0},{name:"重庆市",center:[106.504962,29.533155],centroid:[107.8839,30.067297],blur:!0},{name:"四川省",center:[104.065735,30.659462],centroid:[102.693453,30.674545],hide:!0},{name:"贵州省",center:[106.713478,26.578343],centroid:[106.880455,26.826368],blur:!0},{name:"云南省",center:[102.712251,25.040609],centroid:[101.485106,25.008643],hide:!0},{name:"西藏自治区",center:[91.132212,29.660361],centroid:[88.388277,31.56375],hide:!0},{name:"陕西省",center:[108.948024,34.263161],centroid:[108.887114,35.263661],hide:!0},{name:"甘肃省",center:[103.823557,36.058039],centroid:[103.823557,36.058039],hide:!0},{name:"青海省",center:[101.778916,36.623178],centroid:[96.043533,35.726403],hide:!0},{name:"宁夏回族自治区",center:[106.278179,38.46637],centroid:[106.169866,37.291332],hide:!0},{name:"新疆维吾尔自治区",center:[87.617733,43.792818],centroid:[85.294711,41.371801],hide:!0},{name:"台湾省",center:[121.509062,25.044332],centroid:[120.971485,23.749452]},{name:"香港特别行政区",center:[114.173355,22.320048],centroid:[114.134357,22.377366],hide:!0},{name:"澳门特别行政区",center:[113.54909,22.198951],centroid:[113.566988,22.159307],hide:!0}],Ae=[{name:"广州市",enName:"guangzhou",center:[113.280637,23.125178],centroid:[113.544372,23.329249],value:100},{name:"韶关市",center:[113.591544,24.801322],centroid:[113.779323,24.81941],value:32},{name:"深圳市",enName:"shenzhen",center:[114.085947,22.547],centroid:[114.143142,22.643377],value:79},{name:"珠海市",enName:"zhuhai",center:[113.553986,22.224979],centroid:[113.337286,22.160135],value:68},{name:"汕头市",enName:"shantou",center:[116.708463,23.37102],centroid:[116.575361,23.322231],value:56},{name:"佛山市",enName:"foushan",center:[113.122717,23.028762],centroid:[112.949778,23.004314],value:52},{name:"江门市",center:[113.094942,22.590431],centroid:[112.676451,22.284348],value:18},{name:"湛江市",enName:"zhanjiang",center:[110.364977,21.274898],centroid:[110.109828,21.047893],value:48},{name:"茂名市",enName:"maoming",center:[110.919229,21.659751],centroid:[110.958736,22.008884],value:51},{name:"肇庆市",center:[112.472529,23.051546],centroid:[112.210411,23.536359],value:26},{name:"惠州市",center:[114.412599,23.079404],centroid:[114.507032,23.234461],value:23},{name:"梅州市",center:[116.117582,24.299112],centroid:[116.084478,24.201791],value:26},{name:"汕尾市",center:[115.364238,22.774485],centroid:[115.53778,23.004558],value:18},{name:"河源市",center:[114.697802,23.746266],centroid:[114.962729,24.043541],value:30},{name:"阳江市",center:[111.975107,21.859222],centroid:[111.779569,22.02617],value:31},{name:"清远市",center:[113.051227,23.685022],centroid:[112.879397,24.313361],value:32},{name:"东莞市",center:[113.746262,23.046237],centroid:[113.879966,22.931879],value:22},{name:"中山市",center:[113.382391,22.521113],centroid:[113.398784,22.517323],value:18},{name:"潮州市",center:[116.632301,23.661701],centroid:[116.790217,23.783155],value:22},{name:"揭阳市",center:[116.355733,23.543778],centroid:[116.124317,23.334057],value:31},{name:"云浮市",center:[112.044439,22.929801],centroid:[111.798791,22.813664],value:27}],Zt=[{value:180,lng:113.79080836137965,lat:23.37817344238561},{value:160,lng:114.11575154610837,lat:24.544118853431584},{value:150,lng:113.90665016218497,lat:22.566294804186708},{value:177,lng:114.54888199811992,lat:22.49603139751199},{value:130,lng:113.19269605689502,lat:22.315122216209396},{value:165,lng:116.38945625146404,lat:23.31380538969534},{value:165,lng:112.73950729308208,lat:22.7738070486437},{value:132,lng:110.5053465118048,lat:21.483755786091354},{value:158,lng:110.97116928080241,lat:21.501265449445654},{value:187,lng:110.98025934474002,lat:22.313939207182745},{value:123,lng:112.45712629619587,lat:23.80098247328565},{value:143,lng:111.63231830466472,lat:23.642211594858992},{value:111,lng:114.32206396969852,lat:23.462313647288138},{value:143,lng:115.44284040417362,lat:23.78996087501679},{value:155,lng:115.88398523622054,lat:24.071643694626665},{value:177,lng:115.19822244193529,lat:22.955835684038735},{value:111,lng:115.07713605813625,lat:24.265955078606343},{value:165,lng:112.40005460492905,lat:24.352214434023505},{value:176,lng:112.6704547787618,lat:24.812677617183308},{value:123,lng:113.2098494520477,lat:24.289170856772266},{value:165,lng:113.96172708317867,lat:22.930643828368673},{value:123,lng:113.46114422420524,lat:22.535589620765787},{value:165,lng:116.24634661744335,lat:23.368093925279403},{value:123,lng:111.54752784414158,lat:22.554544085168132}],Kt=[{name:"监测点#01",level:"差",value:84.9,lng:116.46950242,lat:24.20648952},{name:"监测点#02",level:"极好",value:12.5,lng:112.56651822,lat:24.85127417},{name:"监测点#03",level:"良好",value:52.8,lng:111.91602618,lat:23.54062744},{name:"监测点#04",level:"好",value:32,lng:112.71216039,lat:22.18083965}];function oe(h){return h.sort((e,t)=>t.value-e.value),h}class ea extends _e{constructor(e,t){super(e),this.geoProjectionCenter=[113.280637,23.125178],this.geoProjectionScale=120,this.flyLineCenter=[113.544372,23.329249],this.depth=.5,this.mapFocusLabelInfo={name:"广东省",enName:"GUANGDONG PROVINCE",center:[113.280637,20.625178]},this.clicked=!1,this.scene.fog=new Oe(0,1,50),this.scene.background=new M(0),this.camera.instance.position.set(-13.767695123014105,12.990152163077308,39.28228164159694),this.camera.instance.near=1,this.camera.instance.far=1e4,this.camera.instance.updateProjectionMatrix(),this.interactionManager=new Re(this.renderer.instance,this.camera.instance,this.canvas),this.playing=!1,this.assets=t,this.initEnvironment(),this.init()}init(){this.labelGroup=new w,this.label3d=new ke(this),this.labelGroup.rotation.x=-Math.PI/2,this.scene.add(this.labelGroup),this.flyLineFocusGroup=new w,this.flyLineFocusGroup.visible=!1,this.flyLineFocusGroup.rotation.x=-Math.PI/2,this.scene.add(this.flyLineFocusGroup),this.eventElement=[],this.defaultMaterial=null,this.defaultLightMaterial=null,this.createBottomBg(),this.createChinaBlurLine(),this.createGrid(),this.createRotateBorder(),this.createLabel(),this.createMap(),this.createAnimateVideo(),this.createEvent(),this.createFlyLine(),this.createFlyLineFocus(),this.createParticles(),this.createScatter(),this.createInfoPoint();let e=S.timeline();e.pause(),e.eventCallback("onReverseComplete",()=>{this.config.hasUpdate=!1}),this.animateTl=e,e.addLabel("focusMap",1.5),e.addLabel("focusMapOpacity",2),e.addLabel("bar",3),e.to(this.camera.instance.position,{duration:2,x:-.2515849818960619,y:12.397744557047988,z:14.647659671139275,ease:"circ.out",onStart:()=>{this.flyLineFocusGroup.visible=!1}}),e.to(this.focusMapGroup.position,{duration:1,x:0,y:0,z:0},"focusMap"),e.to(this.focusMapGroup.scale,{duration:1,x:1,y:1,z:1,ease:"circ.out"},"focusMap"),e.to(this.focusMapTopMaterial,{duration:1,opacity:1,ease:"circ.out"},"focusMapOpacity"),e.to(this.focusMapSideMaterial,{duration:1,opacity:1,ease:"circ.out",onComplete:()=>{this.focusMapSideMaterial.transparent=!1}},"focusMapOpacity"),this.otherLabel.map((t,n)=>{let a=t.element.querySelector(".other-label");e.to(a,{duration:1,delay:.1*n,translateY:0,opacity:1,ease:"circ.out"},"focusMapOpacity")}),e.to(this.mapLineMaterial,{duration:.5,delay:.3,opacity:1},"focusMapOpacity"),e.to(this.rotateBorder1.scale,{delay:.3,duration:1,x:1,y:1,z:1,ease:"circ.out"},"focusMapOpacity"),e.to(this.rotateBorder2.scale,{duration:1,delay:.5,x:1,y:1,z:1,ease:"circ.out",onComplete:()=>{this.flyLineFocusGroup.visible=!0}},"focusMapOpacity"),this.allBar.map((t,n)=>{e.to(t.scale,{duration:1,delay:.1*n,x:1,y:1,z:1,ease:"circ.out"},"bar")}),this.allBarMaterial.map((t,n)=>{e.to(t,{duration:1,delay:.1*n,opacity:1,ease:"circ.out"},"bar")}),this.allProvinceLabel.map((t,n)=>{let a=t.element.querySelector(".provinces-label-wrap"),i=t.element.querySelector(".number .value"),s=Number(i.innerText),c={score:0};e.to(a,{duration:1,delay:.2*n,translateY:0,opacity:1,ease:"circ.out"},"bar"),e.to(c,{duration:1,delay:.2*n,score:s,onUpdate:o},"bar");function o(){i.innerText=c.score.toFixed(0)}}),this.allGuangquan.map((t,n)=>{e.to(t.children[0].scale,{duration:1,delay:.1*n,x:1,y:1,z:1,ease:"circ.out"},"bar"),e.to(t.children[1].scale,{duration:1,delay:.1*n,x:1,y:1,z:1,ease:"circ.out"},"bar")})}initEnvironment(){let e=new je(16777215,3);this.scene.add(e);let t=new Ee(16777215,8);t.position.set(-30,6,-8),t.castShadow=!0,t.shadow.radius=20,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t),this.createPointLight({color:"#429484",intensity:600,distance:1e4,x:-9,y:3,z:-3}),this.createPointLight({color:"#429484",intensity:230,distance:1e4,x:0,y:2,z:5})}createPointLight(e){const t=new Ue(1924702,e.intensity,e.distance);t.position.set(e.x,e.y,e.z),this.scene.add(t)}createMap(){let e=new w,t=new w;this.focusMapGroup=t;let{china:n,chinaTopLine:a}=this.createChina(),{map:i,mapTop:s,mapLine:c}=this.createProvince();n.setParent(e),a.setParent(e),i.setParent(t),s.setParent(t),c.setParent(t),t.position.set(0,0,-.01),t.scale.set(1,1,0),e.add(t),e.rotateX(-Math.PI/2),e.position.set(0,.2,0),this.scene.add(e),this.createBar()}createChina(){let e={chinaBgMaterialColor:"#17211e",lineColor:"#558273"},t=this.assets.instance.getResource("china"),n=new ve({color:new M(e.chinaBgMaterialColor),transparent:!0,opacity:1}),a=new xe(this,{data:t,geoProjectionCenter:this.geoProjectionCenter,geoProjectionScale:this.geoProjectionScale,merge:!0,material:n,renderOrder:2}),i=new J({color:e.lineColor}),s=new Se(this,{data:t,geoProjectionCenter:this.geoProjectionCenter,geoProjectionScale:this.geoProjectionScale,material:i,renderOrder:3});return s.lineGroup.position.z+=.01,{china:a,chinaTopLine:s}}createProvince(){let e=this.assets.instance.getResource("mapJson"),[t,n]=this.createProvinceMaterial();this.focusMapTopMaterial=t,this.focusMapSideMaterial=n;let a=new Mt(this,{geoProjectionCenter:this.geoProjectionCenter,geoProjectionScale:this.geoProjectionScale,position:new f(0,0,.11),data:e,depth:this.depth,topFaceMaterial:t,sideMaterial:n,renderOrder:9}),i=new ye({color:16777215,transparent:!0,opacity:.5});new Le(i),this.defaultMaterial=i,this.defaultLightMaterial=this.defaultMaterial.clone(),this.defaultLightMaterial.emissive.setHex(725293),this.defaultLightMaterial.emissiveIntensity=3.5;let s=new xe(this,{geoProjectionCenter:this.geoProjectionCenter,geoProjectionScale:this.geoProjectionScale,position:new f(0,0,this.depth+.22),data:e,material:i,renderOrder:2});s.mapGroup.children.map(o=>{o.children.map(r=>{r.type==="Mesh"&&this.eventElement.push(r)})}),this.mapLineMaterial=new J({color:16777215,opacity:0,transparent:!0,fog:!1});let c=new Se(this,{geoProjectionCenter:this.geoProjectionCenter,geoProjectionScale:this.geoProjectionScale,data:e,material:this.mapLineMaterial,renderOrder:3});return c.lineGroup.position.z+=this.depth+.23,{map:a,mapTop:s,mapLine:c}}createProvinceMaterial(){let e=new ve({color:16777215,transparent:!0,opacity:0,fog:!1,side:z});e.onBeforeCompile=a=>{a.uniforms={...a.uniforms,uColor1:{value:new M(2781042)},uColor2:{value:new M(860197)}},a.vertexShader=a.vertexShader.replace("void main() {",`
        attribute float alpha;
        varying vec3 vPosition;
        varying float vAlpha;
        void main() {
          vAlpha = alpha;
          vPosition = position;
      `),a.fragmentShader=a.fragmentShader.replace("void main() {",`
        varying vec3 vPosition;
        varying float vAlpha;
        uniform vec3 uColor1;
        uniform vec3 uColor2;
        void main() {
      `),a.fragmentShader=a.fragmentShader.replace("#include <opaque_fragment>",`
      #ifdef OPAQUE
      diffuseColor.a = 1.0;
      #endif
            #ifdef USE_TRANSMISSION
      diffuseColor.a *= transmissionAlpha + 0.1;
      #endif
      vec3 gradient = mix(uColor1, uColor2, vPosition.x/15.78);       outgoingLight = outgoingLight*gradient;
      float topAlpha = 0.5;
      if(vPosition.z>0.3){
        diffuseColor.a *= topAlpha;
      }
      gl_FragColor = vec4( outgoingLight, diffuseColor.a  );
      `)};let t=this.assets.instance.getResource("side");t.wrapS=G,t.wrapT=G,t.repeat.set(1,1.5),t.offset.y+=.065;let n=new ye({color:10747843,map:t,fog:!1,opacity:0,side:z});return this.time.on("tick",()=>{t.offset.y+=.005}),n.onBeforeCompile=a=>{a.uniforms={...a.uniforms,uColor1:{value:new M(2781042)},uColor2:{value:new M(2781042)}},a.vertexShader=a.vertexShader.replace("void main() {",`
        attribute float alpha;
        varying vec3 vPosition;
        varying float vAlpha;
        void main() {
          vAlpha = alpha;
          vPosition = position;
      `),a.fragmentShader=a.fragmentShader.replace("void main() {",`
        varying vec3 vPosition;
        varying float vAlpha;
        uniform vec3 uColor1;
        uniform vec3 uColor2;
        void main() {
      `),a.fragmentShader=a.fragmentShader.replace("#include <opaque_fragment>",`
      #ifdef OPAQUE
      diffuseColor.a = 1.0;
      #endif
            #ifdef USE_TRANSMISSION
      diffuseColor.a *= transmissionAlpha + 0.1;
      #endif
      vec3 gradient = mix(uColor1, uColor2, vPosition.z/1.2);
      outgoingLight = outgoingLight*gradient;
      gl_FragColor = vec4( outgoingLight, diffuseColor.a  );
      `)},[e,n]}createBar(){let e=this,t=oe(Ae).filter((o,r)=>r<7);const n=new w;this.barGroup=n;const a=.7,i=4*a,s=t[0].value;this.allBar=[],this.allBarMaterial=[],this.allGuangquan=[],this.allProvinceLabel=[],t.map((o,r)=>{let u=i*(o.value/s),l=new v({color:16777215,transparent:!0,opacity:0,depthTest:!1,fog:!1});new Le(l,{uColor1:r>3?16506760:5291006,uColor2:r>3?16776948:7863285,size:u,dir:"y"});const p=new $e(.1*a,.1*a,u);p.translate(0,0,u/2);const m=new x(p,l);m.renderOrder=5;let d=m,[g,L]=this.geoProjection(o.centroid);d.position.set(g,-L,this.depth+.45),d.scale.set(1,1,0);let C=this.createQuan(new f(g,this.depth+.44,L),r),R=this.createHUIGUANG(u,r>3?16776948:7863285);d.add(...R),n.add(d),n.rotation.x=-Math.PI/2;let A=c(o,r,new f(g,-L,this.depth+1.1+u));this.allBar.push(d),this.allBarMaterial.push(l),this.allGuangquan.push(C),this.allProvinceLabel.push(A)}),this.scene.add(n);function c(o,r,u){let l=e.label3d.create("","provinces-label",!1);return l.init(`<div class="provinces-label ${r>4?"yellow":""}">
      <div class="provinces-label-wrap">
        <div class="number"><span class="value">${o.value}</span><span class="unit">万人</span></div>
        <div class="name">
          <span class="zh">${o.name}</span>
          <span class="en">${o.enName.toUpperCase()}</span>
        </div>
        <div class="no">${r+1}</div>
      </div>
    </div>`,u),e.label3d.setLabelStyle(l,.01,"x"),l.setParent(e.labelGroup),l}}createEvent(){let e=[];const t=a=>{a.traverse(i=>{i.isMesh&&(i.material=this.defaultMaterial)})},n=a=>{a.traverse(i=>{i.isMesh&&(i.material=this.defaultLightMaterial)})};this.eventElement.map(a=>{this.interactionManager.add(a),a.addEventListener("mousedown",i=>{console.log(i.target.userData.name)}),a.addEventListener("mouseover",i=>{e.includes(i.target.parent)||e.push(i.target.parent),document.body.style.cursor="pointer",n(i.target.parent)}),a.addEventListener("mouseout",i=>{e=e.filter(s=>s.userData.name!==i.target.parent.userData.name),e.length>0&&e[e.length-1],t(i.target.parent),document.body.style.cursor="default"})})}createHUIGUANG(e,t){let n=new B(.35,e);n.translate(0,e/2,0);const a=this.assets.instance.getResource("huiguang");a.colorSpace=T,a.wrapS=G,a.wrapT=G;let i=new v({color:t,map:a,transparent:!0,opacity:.4,depthWrite:!1,side:z,blending:b}),s=new x(n,i);s.renderOrder=10,s.rotateX(Math.PI/2);let c=s.clone(),o=s.clone();return c.rotateY(Math.PI/180*60),o.rotateY(Math.PI/180*120),[s,c,o]}createQuan(e,t){const n=this.assets.instance.getResource("guangquan1"),a=this.assets.instance.getResource("guangquan2");let i=new B(.5,.5),s=new v({color:16777215,map:n,alphaMap:n,opacity:1,transparent:!0,depthTest:!1,fog:!1,blending:b}),c=new v({color:16777215,map:a,alphaMap:a,opacity:1,transparent:!0,depthTest:!1,fog:!1,blending:b}),o=new x(i,s),r=new x(i,c);return o.renderOrder=6,r.renderOrder=6,o.rotateX(-Math.PI/2),r.rotateX(-Math.PI/2),o.position.copy(e),r.position.copy(e),r.position.y-=.001,o.scale.set(0,0,0),r.scale.set(0,0,0),this.quanGroup=new w,this.quanGroup.add(o,r),this.scene.add(this.quanGroup),this.time.on("tick",()=>{o.rotation.z+=.05}),this.quanGroup}createGrid(){new Gt(this,{gridSize:50,gridDivision:20,gridColor:1923944,shapeSize:.5,shapeColor:3192205,pointSize:.1,pointColor:611133,diffuse:!0,diffuseSpeed:10,diffuseColor:3192205})}createBottomBg(){let e=new B(20,20);const t=this.assets.instance.getResource("ocean");t.colorSpace=T,t.wrapS=G,t.wrapT=G,t.repeat.set(1,1);let n=new v({map:t,opacity:1}),a=new x(e,n);a.rotation.x=-Math.PI/2,a.position.set(0,-.7,0),this.scene.add(a)}createChinaBlurLine(){let e=new B(147,147);const t=this.assets.instance.getResource("chinaBlurLine");t.colorSpace=T,t.wrapS=G,t.wrapT=G,t.generateMipmaps=!1,t.minFilter=U,t.repeat.set(1,1);let n=new v({color:3969700,alphaMap:t,transparent:!0,opacity:.5}),a=new x(e,n);a.rotateX(-Math.PI/2),a.position.set(-19.3,-.5,-19.7),this.scene.add(a)}createAnimateVideo(){this.createAnimateVideoItem(".map-video1",new f(11,.4,1)),this.createAnimateVideoItem(".map-video2",new f(-11,.4,2))}createAnimateVideoItem(e,t){let n=document.querySelector(e);window.addEventListener("pointerdown",()=>{n.play()});let a=new We(n);a.colorSpace=T;let i=1.2,s=new B(2.5*i,1*i),c=new v({color:10807286,alphaMap:a,transparent:!0,opacity:1,blending:b}),o=new x(s,c);o.rotateX(-Math.PI/2),o.position.copy(t),o.renderOrder=10,this.scene.add(o)}createLabel(){let e=this,t=this.labelGroup,n=this.label3d,a=[];Yt.map(l=>{if(l.hide==!0)return!1;let p=o(l,n,t);a.push(p)});let i=r({...this.mapFocusLabelInfo},n,t),s=u({icon:ie,center:[118.280637,21.625178],width:"40px",height:"40px",reflect:!0},n,t),c=u({icon:ie,center:[106.280637,25.625178],width:"20px",height:"20px",reflect:!1},n,t);a.push(i),a.push(s),a.push(c),this.otherLabel=a;function o(l,p,m){let d=p.create("",`china-label ${l.blur?" blur":""}`,!1);const[g,L]=e.geoProjection(l.center);return d.init(`<div class="other-label"><img class="label-icon" src="${ie}">${l.name}</div>`,new f(g,-L,.4)),p.setLabelStyle(d,.02,"x"),d.setParent(m),d}function r(l,p,m){let d=p.create("","map-label",!1);const[g,L]=e.geoProjection(l.center);return d.init(`<div class="other-label"><span>${l.name}</span><span>${l.enName}</span></div>`,new f(g,-L,.4)),p.setLabelStyle(d,.015,"x"),d.setParent(m),d}function u(l,p,m){let d=p.create("",`decoration-label  ${l.reflect?" reflect":""}`,!1);const[g,L]=e.geoProjection(l.center);return d.init(`<div class="other-label"><img class="label-icon" style="width:${l.width};height:${l.height}" src="${l.icon}">`,new f(g,-L,.4)),p.setLabelStyle(d,.02,"x"),d.setParent(m),d}}createRotateBorder(){let e=12,t=this.assets.instance.getResource("rotationBorder1"),n=this.assets.instance.getResource("rotationBorder2"),a=new Me(this,{width:e*1.178,needRotate:!0,rotateSpeed:.001,material:new v({map:t,color:2795692,transparent:!0,opacity:.2,side:z,depthWrite:!1,blending:b}),position:new f(0,.28,0)});a.instance.rotation.x=-Math.PI/2,a.instance.renderOrder=6,a.instance.scale.set(0,0,0),a.setParent(this.scene);let i=new Me(this,{width:e*1.116,needRotate:!0,rotateSpeed:-.004,material:new v({map:n,color:2795692,transparent:!0,opacity:.4,side:z,depthWrite:!1,blending:b}),position:new f(0,.3,0)});i.instance.rotation.x=-Math.PI/2,i.instance.renderOrder=6,i.instance.scale.set(0,0,0),i.setParent(this.scene),this.rotateBorder1=a.instance,this.rotateBorder2=i.instance}createFlyLine(){this.flyLineGroup=new w,this.flyLineGroup.visible=!1,this.scene.add(this.flyLineGroup);const e=this.assets.instance.getResource("mapFlyline");e.wrapS=e.wrapT=G,e.repeat.set(1,1);const t=.03,n=32,a=8,i=!1;let[s,c]=this.geoProjection(this.flyLineCenter),o=new f(s,-c,0);const r=new v({map:e,alphaMap:e,color:2781042,transparent:!0,fog:!1,opacity:1,depthTest:!1,blending:b});this.time.on("tick",()=>{e.offset.x-=.006}),Ae.filter((u,l)=>l<7).map(u=>{let[l,p]=this.geoProjection(u.centroid),m=new f(l,-p,0);const d=new f;d.addVectors(o,m).multiplyScalar(.5),d.setZ(3);const g=new qe(o,d,m),L=new Y(g,n,t,a,i),C=new x(L,r);C.rotation.x=-Math.PI/2,C.position.set(0,this.depth+.44,0),C.renderOrder=21,this.flyLineGroup.add(C)})}createFlyLineFocus(){let[e,t]=this.geoProjection([113.544372,23.329249]);this.flyLineFocusGroup.position.set(e,this.depth+.442,t);const n=this.assets.instance.getResource("flyLineFocus"),a=new B(1,1),i=new v({color:16777215,map:n,alphaMap:n,transparent:!0,fog:!1,depthTest:!1,blending:b}),s=new x(a,i);s.scale.set(0,0,0);const c=s.clone();c.material=i.clone(),this.flyLineFocusGroup.add(s,c),S.to(s.material,{opacity:0,repeat:-1,yoyo:!1,duration:1}),S.to(s.scale,{x:1.5,y:1.5,z:1.5,repeat:-1,yoyo:!1,duration:1}),S.to(c.material,{delay:.5,opacity:0,repeat:-1,yoyo:!1,duration:1}),S.to(c.scale,{delay:.5,x:1.5,y:1.5,z:1.5,repeat:-1,yoyo:!1,duration:1})}createParticles(){this.particles=new Ge(this,{num:10,range:30,dir:"up",speed:.05,material:new le({map:Ge.createTexture(),size:1,color:61166,transparent:!0,opacity:1,depthTest:!1,depthWrite:!1,vertexColors:!0,blending:b,sizeAttenuation:!0})}),this.particleGroup=new w,this.scene.add(this.particleGroup),this.particleGroup.rotation.x=-Math.PI/2,this.particles.setParent(this.particleGroup),this.particles.enable=!1,this.particleGroup.visible=!1}createScatter(){this.scatterGroup=new w,this.scatterGroup.visible=!1,this.scatterGroup.rotation.x=-Math.PI/2,this.scene.add(this.scatterGroup);const e=this.assets.instance.getResource("arrow"),t=new Z({map:e,color:16776948,fog:!1,transparent:!0,depthTest:!1});let n=oe(Zt),a=n[0].value;n.map(i=>{const s=new K(t);s.renderOrder=23;let c=.1+i.value/a*.2;s.scale.set(c,c,c);let[o,r]=this.geoProjection([i.lng,i.lat]);s.position.set(o,-r,this.depth+.45),s.userData.position=[o,-r,this.depth+.45],this.scatterGroup.add(s)})}createInfoPoint(){let e=this;this.InfoPointGroup=new w,this.scene.add(this.InfoPointGroup),this.InfoPointGroup.visible=!1,this.InfoPointGroup.rotation.x=-Math.PI/2,this.infoPointIndex=0,this.infoPointLabelTime=null,this.infoLabelElement=[];let t=this.label3d;const n=this.assets.instance.getResource("point");let a=[16776948,7863285],i=oe(Kt),s=i[0].value;i.map((o,r)=>{const u=new Z({map:n,color:a[r%a.length],fog:!1,transparent:!0,depthTest:!1}),l=new K(u);l.renderOrder=23;let p=.7+o.value/s*.4;l.scale.set(p,p,p);let[m,d]=this.geoProjection([o.lng,o.lat]),g=[m,-d,this.depth+.7];l.position.set(...g),l.userData.position=[...g],l.userData={position:[m,-d,this.depth+.7],name:o.name,value:o.value,level:o.level,index:r},this.InfoPointGroup.add(l);let L=c(o,t,this.InfoPointGroup);this.infoLabelElement.push(L),this.interactionManager.add(l),l.addEventListener("mousedown",C=>{if(this.clicked||!this.InfoPointGroup.visible)return!1;this.clicked=!0,this.infoPointIndex=C.target.userData.index,this.infoLabelElement.map(R=>{R.visible=!1}),L.visible=!0,this.createInfoPointLabelLoop()}),l.addEventListener("mouseup",C=>{this.clicked=!1}),l.addEventListener("mouseover",C=>{document.body.style.cursor="pointer"}),l.addEventListener("mouseout",C=>{document.body.style.cursor="default"})});function c(o,r,u){let l=r.create("","info-point",!0);const[p,m]=e.geoProjection([o.lng,o.lat]);return l.init(` <div class="info-point-wrap">
          <div class="info-point-wrap-inner">
            <div class="info-point-line">
              <div class="line"></div>
              <div class="line"></div>
              <div class="line"></div>
            </div>
            <div class="info-point-content">
              <div class="content-item"><span class="label">名称</span><span class="value">${o.name}</span></div>
              <div class="content-item"><span class="label">PM2.5</span><span class="value">${o.value}ug/m²</span></div>
              <div class="content-item"><span class="label">等级</span><span class="value">${o.level}</span></div>
            </div>
          </div>
        </div>
      `,new f(p,-m,e.depth+1.9)),r.setLabelStyle(l,.015,"x"),l.setParent(u),l.visible=!1,l}}createInfoPointLabelLoop(){clearInterval(this.infoPointLabelTime),this.infoPointLabelTime=setInterval(()=>{this.infoPointIndex++,this.infoPointIndex>=this.infoLabelElement.length&&(this.infoPointIndex=0),this.infoLabelElement.map((e,t)=>{this.infoPointIndex===t?e.visible=!0:e.visible=!1})},3e3)}geoProjection(e){return Pt().center(this.geoProjectionCenter).scale(this.geoProjectionScale).translate([0,0])(e)}update(){super.update(),this.interactionManager&&this.interactionManager.update()}destroy(){super.destroy(),this.label3d&&this.label3d.destroy()}}const ta={data(){return this.canvasMap=null,this.initBtnList=[{name:"飞线",checked:!1},{name:"散点图",checked:!1},{name:"重点点位",checked:!1},{name:"粒子特效",checked:!1}],{btnList:ee(this.initBtnList)}},mounted(){te.$on("loadMap",this.loadMap)},beforeUnmount(){this.canvasMap&&this.canvasMap.destroy()},methods:{loadMap(h){this.canvasMap=new ea(document.getElementById("canvasMap"),h),this.canvasMap.config.hasUpdate=!1},async play(){this.canvasMap.config.hasUpdate=!0,this.canvasMap.animateTl.timeScale(1),this.canvasMap.animateTl.play(),this.showBtn()},async reverse(){await this.hideBtn(),this.canvasMap.animateTl.timeScale(1.7),this.canvasMap.animateTl.reverse()},pause(){this.canvasMap.config.hasUpdate=!1},showBtn(){S.to(".map-btn-group .btn",{x:0,stagger:.1})},async hideBtn(){this.btnList=ee(this.initBtnList),this.initBtnList.map(h=>{this.changeGroupVisible(h.name,h.checked)}),S.to(".map-btn-group .btn",{x:"150%",stagger:.1})},changeBtnChecked(h,e){let t=!this.btnList[e].checked;this.btnList[e].checked=t,this.changeGroupVisible(h,t)},changeGroupVisible(h,e){let t={飞线:"flyLineGroup",散点图:"scatterGroup",重点点位:"InfoPointGroup",粒子特效:"particleGroup"};h==="粒子特效"&&(this.canvasMap.particles.enable=e),h==="飞线"&&(this.canvasMap.flyLineFocusGroup.visible=e),h==="重点点位"&&(this.canvasMap[t[h]].visible=e,e?this.canvasMap.createInfoPointLabelLoop():(clearInterval(this.canvasMap.infoPointLabelTime),this.canvasMap.infoLabelElement.map(n=>{n.visible=!1}))),this.canvasMap&&(this.canvasMap[t[h]].visible=e)}}},aa={class:"map"},na=P("canvas",{id:"canvasMap"},null,-1),ia=P("video",{class:"map-video map-video1",width:"250",height:"100",loop:"",crossorigin:"anonymous",playsinline:"",style:{display:"none"}},[P("source",{src:Ct})],-1),sa=P("video",{class:"map-video map-video2",width:"250",height:"100",loop:"",crossorigin:"anonymous",playsinline:"",style:{display:"none"}},[P("source",{src:Tt})],-1),oa={class:"btn-group map-btn-group"},ra=["onClick"];function la(h,e,t,n,a,i){return O(),k("div",aa,[na,ia,sa,P("div",oa,[(O(!0),k(he,null,ue(a.btnList,(s,c)=>(O(),k("div",{class:H(["btn",{active:s.checked}]),key:c,onClick:o=>i.changeBtnChecked(s.name,c)},pe(s.name),11,ra))),128))])])}const ca=ce(ta,[["render",la]]);class ha{constructor(){this.init()}init(){this.cloudsWrap=document.querySelector(".clouds-wrap"),this.tl=S.timeline(),this.tl.pause();let e=S.utils.toArray(".clouds-item"),t=window.innerWidth,n=window.innerHeight;e.forEach((a,i)=>{let s=Math.random()*t-t/2*i*.4,c=Math.random()*n-n/2;S.set(a,{x:s,y:c,scaleX:i%2==0?-1:1,translateY:-(i+1)*1e3+"px",opacity:0})}),this.tl.to(e,{x:3e3,translateY:0,opacity:1,duration:4})}play(){this.tl.play()}reverse(){this.tl.reverse()}destroy(){}}class ua{constructor(){this.init()}init(){this.instance=new Ve,this.instance.addLoader(He,"FileLoader");let e="/globe-map-demos/",t=[{type:"Texture",name:"watermark",path:Je},{type:"Texture",name:"earthAtoms",path:nt},{type:"Texture",name:"earthNight",path:it},{type:"Texture",name:"earthAtomsLine",path:st},{type:"Texture",name:"earthClouds",path:ot},{type:"Texture",name:"highLight",path:rt},{type:"Texture",name:"globeHuiguang",path:lt},{type:"Texture",name:"lightPillar",path:ct},{type:"Texture",name:"chinaGlow",path:ht},{type:"Texture",name:"chinaGlowShadow",path:ut},{type:"Texture",name:"flyline",path:Qe},{type:"Texture",name:"pathLine",path:Xe},{type:"Texture",name:"pathLine2",path:Ye},{type:"Texture",name:"pathLine3",path:Ze},{type:"Texture",name:"gridBlack",path:pt},{type:"Texture",name:"pointLight",path:dt},{type:"Texture",name:"dotBlur",path:mt},{type:"Texture",name:"haiyunIcon",path:ft},{type:"Texture",name:"luyunIcon",path:gt},{type:"GLTF",name:"gps",path:vt},{type:"File",name:"chinaStorke",path:e+"assets/json/中华人民共和国-轮廓-地球.json"},{type:"File",name:"china",path:e+"assets/json/中华人民共和国.json"},{type:"File",name:"haianxian",path:e+"assets/json/海岸线.json"},{type:"File",name:"ludixian1",path:e+"assets/json/陆地线1.json"},{type:"File",name:"ludixian2",path:e+"assets/json/陆地线2.json"},{type:"File",name:"mapJson",path:e+"assets/json/广东省.json"},{type:"Texture",name:"huiguang",path:It},{type:"Texture",name:"rotationBorder1",path:At},{type:"Texture",name:"rotationBorder2",path:Bt},{type:"Texture",name:"guangquan1",path:Pe},{type:"Texture",name:"guangquan2",path:_t},{type:"Texture",name:"chinaBlurLine",path:Ot},{type:"Texture",name:"ocean",path:kt},{type:"Texture",name:"side",path:Rt},{type:"Texture",name:"flyLineFocus",path:Pe},{type:"Texture",name:"mapFlyline",path:Ft},{type:"Texture",name:"arrow",path:zt},{type:"Texture",name:"point",path:Dt},{type:"Texture",name:"focusArrows",path:yt},{type:"Texture",name:"focusBar",path:bt},{type:"Texture",name:"focusBg",path:wt},{type:"Texture",name:"focusMidQuan",path:xt},{type:"Texture",name:"focusMoveBg",path:St}];this.instance.loadAll(t)}}const pa={components:{globeScene:Xt,mapScene:ca},data(){return this.clouds=null,this.assets=null,{sceneName:"globe",disabedClick:!1,progress:0}},mounted(){this.clouds=new ha,this.initAssets(async()=>{te.$emit("loadGlobe",this.assets),te.$emit("loadMap",this.assets),this.hideLoading()})},beforeUnmount(){this.assets=null,this.clouds=null},methods:{initAssets(h){this.assets=new ua;let e={progress:0};this.assets.instance.on("onProgress",(t,n,a)=>{let i=Math.floor(n/a)*100;S.to(e,{progress:i,onUpdate:()=>{this.progress=Math.floor(e.progress)}})}),this.assets.instance.on("onLoad",()=>{h&&h()})},async toMap(){if(this.sceneName==="map"||this.disabedClick)return!1;this.disabedClick=!0,this.sceneName="map",this.$refs.globeScene.animateInOut(),this.clouds.play(),await $(1500),this.$refs.mapScene.play(),await $(4e3),this.disabedClick=!1},async backGlobe(){if(this.sceneName==="globe"||this.disabedClick)return!1;this.disabedClick=!0,this.sceneName="globe",this.$refs.mapScene.reverse(),this.clouds.reverse(),await $(2500),this.$refs.globeScene.animateOutIn(),await $(2e3),this.disabedClick=!1},hideLoading(){let h=S.timeline();h.to(".loading-text span",{y:"200%",opacity:0,ease:"power4.inOut",duration:2,stagger:.2}),h.to(".loading-progress",{opacity:0,ease:"power4.inOut",duration:2},"<"),h.to(".loading",{opacity:0,ease:"power4.inOut"},"-=1")}}},da={class:"large-screen"},ma={class:"clouds-wrap"},fa={class:"loading"},ga=Lt('<div class="loading-text"><span style="--index:1;">L</span><span style="--index:2;">O</span><span style="--index:3;">A</span><span style="--index:4;">D</span><span style="--index:5;">I</span><span style="--index:6;">N</span><span style="--index:7;">G</span></div>',1),va={class:"loading-progress"},ya={class:"value"},ba=P("span",{class:"unit"},"%",-1);function wa(h,e,t,n,a,i){const s=be("globeScene"),c=be("mapScene");return O(),k("div",da,[we(s,{ref:"globeScene"},null,512),we(c,{ref:"mapScene"},null,512),P("div",ma,[(O(),k(he,null,ue(30,o=>P("div",{class:"clouds-item",key:o})),64))]),P("div",{class:H(["btn-group main-btn-group",{disabled:a.disabedClick}])},[P("div",{class:H(["btn",{active:a.sceneName==="globe"&&!a.disabedClick}]),onClick:e[0]||(e[0]=(...o)=>i.backGlobe&&i.backGlobe(...o))},"中国",2),P("div",{class:H(["btn",{active:a.sceneName==="map"&&!a.disabedClick}]),onClick:e[1]||(e[1]=(...o)=>i.toMap&&i.toMap(...o))},"广东",2)],2),P("div",fa,[ga,P("div",va,[P("span",ya,pe(this.progress),1),ba])])])}const Pa=ce(pa,[["render",wa]]);export{Pa as default};
